{"version":3,"file":"commonHelpers.js","sources":["../src/img/icons/bi_x-octagon.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__3108d0c6__\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from 'axios';\n\nimport icon from './img/icons/bi_x-octagon.svg';\n\nconst form = document.querySelector('form');\nconst textArea = document.querySelector('textarea');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('span');\n\nform.addEventListener('submit', event => {\n    event.preventDefault();\n    loader.classList.add(\"loader\");\n    gallery.textContent = '';\n    \n    const valueOfTextarea = textArea.value;\n    fetchImages(valueOfTextarea);\n\n    form.reset();\n});\n\n\nasync function fetchImages(value) {  \n    axios.defaults.baseURL = \"https://pixabay.com\";\n    try {\n        const response = await axios.get('/api/', {\n            params: {\n                key: \"41764698-0ccaaf72f9cf319226b6a04c5\",\n                q: value,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n            }\n        });\n        const arrayOfImg = response.data.hits;\n        if (arrayOfImg.length == 0) {\n            noImages();\n            return;\n        }\n        createGallery(arrayOfImg);\n    } catch(error) {\n        console.log(error);\n        const errText = error.message;\n        errorMessage(errText);\n    };\n\n    loader.classList.remove(\"loader\");\n};\n\nfunction noImages() {\n    iziToast.error({\n      message: \"Sorry, there are no images matching<br/>your search query. Please try again!\",\n      position: \"topRight\",\n      backgroundColor: \"#EF4040\",\n      messageColor: '#fff',\n      iconUrl: icon,\n    });\n}\n\nfunction errorMessage(err) {\n    iziToast.error({\n      message: `Error: ${err}. Please try again!`,\n      position: \"topRight\",\n      backgroundColor: \"#EF4040\",\n      messageColor: '#fff',\n      iconUrl: icon,\n    });\n}\n  \nfunction createGallery(arr) {\n\n    const galleryList = arr.map(\n        ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n                class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n            />\n            </a>\n            <ul class=\"statistics\">\n                <li class=\"statistics-item\">\n                    <h2>Likes</h2>\n                    <p>${likes}</p>\n                </li>\n                <li class=\"statistics-item\">\n                    <h2>Views</h2>\n                    <p>${views}</p>\n                </li>\n                <li class=\"statistics-item\">\n                    <h2>Comments</h2>\n                    <p>${comments}</p>\n                </li>\n                <li class=\"statistics-item\">\n                    <h2>Downloads</h2>\n                    <p>${downloads}</p>\n                </li>\n            </ul>\n        </li>\n        `\n    }).join('');\n    gallery.insertAdjacentHTML('beforeend', galleryList);\n\n    const newLightBox = new SimpleLightbox('.gallery a', {\n        captionsData: \"alt\",\n        captionDelay: 250,\n    });\n\n    newLightBox.refresh();\n}\n\n\n  "],"names":["icon","form","textArea","gallery","loader","event","valueOfTextarea","fetchImages","value","axios","arrayOfImg","noImages","createGallery","error","errText","errorMessage","iziToast","err","arr","galleryList","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox"],"mappings":"owBAAA,MAAeA,EAAA,kDCUTC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAW,SAAS,cAAc,UAAU,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,MAAM,EAE5CH,EAAK,iBAAiB,SAAUI,GAAS,CACrCA,EAAM,eAAc,EACpBD,EAAO,UAAU,IAAI,QAAQ,EAC7BD,EAAQ,YAAc,GAEtB,MAAMG,EAAkBJ,EAAS,MACjCK,EAAYD,CAAe,EAE3BL,EAAK,MAAK,CACd,CAAC,EAGD,eAAeM,EAAYC,EAAO,CAC9BC,EAAM,SAAS,QAAU,sBACzB,GAAI,CAUA,MAAMC,GATW,MAAMD,EAAM,IAAI,QAAS,CACtC,OAAQ,CACJ,IAAK,qCACL,EAAGD,EACH,WAAY,QACZ,YAAa,aACb,WAAY,EACf,CACb,CAAS,GAC2B,KAAK,KACjC,GAAIE,EAAW,QAAU,EAAG,CACxBC,IACA,MACH,CACDC,EAAcF,CAAU,CAC3B,OAAOG,EAAN,CACE,QAAQ,IAAIA,CAAK,EACjB,MAAMC,EAAUD,EAAM,QACtBE,EAAaD,CAAO,CAE5B,CACIV,EAAO,UAAU,OAAO,QAAQ,CACpC,CAEA,SAASO,GAAW,CAChBK,EAAS,MAAM,CACb,QAAS,+EACT,SAAU,WACV,gBAAiB,UACjB,aAAc,OACd,QAAShB,CACf,CAAK,CACL,CAEA,SAASe,EAAaE,EAAK,CACvBD,EAAS,MAAM,CACb,QAAS,UAAUC,uBACnB,SAAU,WACV,gBAAiB,UACjB,aAAc,OACd,QAASjB,CACf,CAAK,CACL,CAEA,SAASY,EAAcM,EAAK,CAExB,MAAMC,EAAcD,EAAI,IACpB,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KACvD;AAAA;AAAA,4CAE6BL;AAAA;AAAA;AAAA,uBAGrBD;AAAA,uBACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAMEC;AAAA;AAAA;AAAA;AAAA,yBAIAC;AAAA;AAAA;AAAA;AAAA,yBAIAC;AAAA;AAAA;AAAA;AAAA,yBAIAC;AAAA;AAAA;AAAA;AAAA,SAKpB,EAAE,KAAK,EAAE,EACVvB,EAAQ,mBAAmB,YAAagB,CAAW,EAE/B,IAAIQ,EAAe,aAAc,CACjD,aAAc,MACd,aAAc,GACtB,CAAK,EAEW,QAAO,CACvB"}