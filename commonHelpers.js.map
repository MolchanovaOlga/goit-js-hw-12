{"version":3,"file":"commonHelpers.js","sources":["../src/img/icons/bi_x-octagon.svg","../src/main.js"],"sourcesContent":["export default \"__VITE_ASSET__3108d0c6__\"","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from 'axios';\n\nimport icon from './img/icons/bi_x-octagon.svg';\n\nconst form = document.querySelector('form');\nconst textArea = document.querySelector('textarea');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('span');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet counter = 1;\nlet perPage = 40;\n\nform.addEventListener('submit', event => {\n    event.preventDefault();\n    loader.classList.add(\"loader\");\n    gallery.textContent = '';\n    loadMoreBtn.style.display = 'none';\n    fetchImages();\n\n    form.reset();\n});\n\nasync function getData() {\n    axios.defaults.baseURL = \"https://pixabay.com\";\n    return await axios.get('/api/', {\n        params: {\n            key: \"41764698-0ccaaf72f9cf319226b6a04c5\",\n            q: textArea.value,\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            page: counter,\n            per_page: perPage,\n        }\n    });\n}\n\nasync function fetchImages() {  \n    try {\n        const response = await getData();\n        const arrayOfImg = response.data.hits;\n        if (arrayOfImg.length == 0) {\n            return noImages();\n        }\n\n        createGallery(arrayOfImg);\n        if (arrayOfImg.length >= perPage) {\n            loadMoreBtn.style.display = 'flex';\n            loadMoreBtn.addEventListener('click', () => {\n                counter += 1;\n            })\n        }\n\n    } catch(error) {\n        console.log(error);\n        const errText = error.message;\n        errorMessage(errText);\n    } finally {\n        loader.classList.remove(\"loader\");\n    }\n};\n\nfunction noImages() {\n    iziToast.error({\n      message: \"Sorry, there are no images matching<br/>your search query. Please try again!\",\n      position: \"topRight\",\n      backgroundColor: \"#EF4040\",\n      messageColor: '#fff',\n      iconUrl: icon,\n    });\n}\n\nfunction errorMessage(err) {\n    iziToast.error({\n      message: `Error: ${err}. Please try again!`,\n      position: \"topRight\",\n      backgroundColor: \"#EF4040\",\n      messageColor: '#fff',\n      iconUrl: icon,\n    });\n}\n  \nfunction createGallery(arr) {\n\n    const galleryList = arr.map(\n        ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `\n        <li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n            <img\n                class=\"gallery-image\"\n                src=\"${webformatURL}\"\n                alt=\"${tags}\"\n            />\n            </a>\n            <ul class=\"statistics\">\n                <li class=\"statistics-item\">\n                    <h2>Likes</h2>\n                    <p>${likes}</p>\n                </li>\n                <li class=\"statistics-item\">\n                    <h2>Views</h2>\n                    <p>${views}</p>\n                </li>\n                <li class=\"statistics-item\">\n                    <h2>Comments</h2>\n                    <p>${comments}</p>\n                </li>\n                <li class=\"statistics-item\">\n                    <h2>Downloads</h2>\n                    <p>${downloads}</p>\n                </li>\n            </ul>\n        </li>\n        `\n    }).join('');\n    gallery.insertAdjacentHTML('beforeend', galleryList);\n\n    const newLightBox = new SimpleLightbox('.gallery a', {\n        captionsData: \"alt\",\n        captionDelay: 250,\n    });\n\n    newLightBox.refresh();\n}\n\n\n  "],"names":["icon","form","textArea","gallery","loader","loadMoreBtn","counter","perPage","event","fetchImages","getData","axios","arrayOfImg","noImages","createGallery","error","errText","errorMessage","iziToast","err","arr","galleryList","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox"],"mappings":"owBAAA,MAAeA,EAAA,kDCUTC,EAAO,SAAS,cAAc,MAAM,EACpCC,EAAW,SAAS,cAAc,UAAU,EAC5CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,MAAM,EACtCC,EAAc,SAAS,cAAc,YAAY,EAEvD,IAAIC,EAAU,EACVC,EAAU,GAEdN,EAAK,iBAAiB,SAAUO,GAAS,CACrCA,EAAM,eAAc,EACpBJ,EAAO,UAAU,IAAI,QAAQ,EAC7BD,EAAQ,YAAc,GACtBE,EAAY,MAAM,QAAU,OAC5BI,IAEAR,EAAK,MAAK,CACd,CAAC,EAED,eAAeS,GAAU,CACrB,OAAAC,EAAM,SAAS,QAAU,sBAClB,MAAMA,EAAM,IAAI,QAAS,CAC5B,OAAQ,CACJ,IAAK,qCACL,EAAGT,EAAS,MACZ,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMI,EACN,SAAUC,CACb,CACT,CAAK,CACL,CAEA,eAAeE,GAAc,CACzB,GAAI,CAEA,MAAMG,GADW,MAAMF,KACK,KAAK,KACjC,GAAIE,EAAW,QAAU,EACrB,OAAOC,EAAQ,EAGnBC,EAAcF,CAAU,EACpBA,EAAW,QAAUL,IACrBF,EAAY,MAAM,QAAU,OAC5BA,EAAY,iBAAiB,QAAS,IAAM,CACxCC,GAAW,CAC3B,CAAa,EAGR,OAAOS,EAAN,CACE,QAAQ,IAAIA,CAAK,EACjB,MAAMC,EAAUD,EAAM,QACtBE,EAAaD,CAAO,CAC5B,QAAc,CACNZ,EAAO,UAAU,OAAO,QAAQ,CACnC,CACL,CAEA,SAASS,GAAW,CAChBK,EAAS,MAAM,CACb,QAAS,+EACT,SAAU,WACV,gBAAiB,UACjB,aAAc,OACd,QAASlB,CACf,CAAK,CACL,CAEA,SAASiB,EAAaE,EAAK,CACvBD,EAAS,MAAM,CACb,QAAS,UAAUC,uBACnB,SAAU,WACV,gBAAiB,UACjB,aAAc,OACd,QAASnB,CACf,CAAK,CACL,CAEA,SAASc,EAAcM,EAAK,CAExB,MAAMC,EAAcD,EAAI,IACpB,CAAC,CAAE,aAAAE,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,KACvD;AAAA;AAAA,4CAE6BL;AAAA;AAAA;AAAA,uBAGrBD;AAAA,uBACAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBAMEC;AAAA;AAAA;AAAA;AAAA,yBAIAC;AAAA;AAAA;AAAA;AAAA,yBAIAC;AAAA;AAAA;AAAA;AAAA,yBAIAC;AAAA;AAAA;AAAA;AAAA,SAKpB,EAAE,KAAK,EAAE,EACVzB,EAAQ,mBAAmB,YAAakB,CAAW,EAE/B,IAAIQ,EAAe,aAAc,CACjD,aAAc,MACd,aAAc,GACtB,CAAK,EAEW,QAAO,CACvB"}